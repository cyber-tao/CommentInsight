<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯„è®ºæ´å¯Ÿ - é…ç½®</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .loading { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .custom-endpoint { display: none; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto max-w-4xl py-8 px-4">
        <!-- å¤´éƒ¨ -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">è¯„è®ºæ´å¯Ÿ - é…ç½®</h1>
                    <p class="text-gray-600 mt-2">é…ç½®APIå¯†é’¥å’Œåˆ†æå‚æ•°</p>
                </div>
                <div class="flex space-x-2">
                    <button id="import-btn" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">
                        å¯¼å…¥é…ç½®
                    </button>
                    <button id="export-btn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                        å¯¼å‡ºé…ç½®
                    </button>
                    <button id="save-btn" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                        ä¿å­˜é…ç½®
                    </button>
                </div>
            </div>
        </div>

        <!-- AIé…ç½® -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 flex items-center">
                <span class="bg-blue-100 text-blue-600 p-2 rounded-full mr-3">ğŸ¤–</span>
                AIåˆ†æé…ç½®
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">APIç«¯ç‚¹</label>
                    <select id="ai-endpoint-select" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="https://api.openai.com/v1">OpenAI (api.openai.com)</option>
                        <option value="https://openrouter.ai/api/v1">OpenRouter (openrouter.ai)</option>
                        <option value="https://api.siliconflow.cn/v1">SiliconFlow (api.siliconflow.cn)</option>
                        <option value="https://open.bigmodel.cn/api/paas/v4">ChatGLM (open.bigmodel.cn)</option>
                        <option value="https://api.deepseek.com/v1">DeepSeek (api.deepseek.com)</option>
                        <option value="https://api.moonshot.cn/v1">Kimi (api.moonshot.cn)</option>
                        <option value="custom">è‡ªå®šä¹‰ç«¯ç‚¹</option>
                    </select>
                    <input type="url" id="ai-endpoint-custom" placeholder="https://your-api-endpoint.com/v1" 
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mt-2 custom-endpoint"
                           style="display: none;">
                    <p class="text-xs text-gray-500 mt-1">é€‰æ‹©æˆ–è¾“å…¥æ”¯æŒOpenAIå…¼å®¹APIçš„ç«¯ç‚¹</p>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">APIå¯†é’¥</label>
                    <input type="password" id="ai-api-key" placeholder="sk-..." 
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <p class="text-xs text-gray-500 mt-1">è¯·ç¡®ä¿å¯†é’¥å®‰å…¨</p>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">æ¨¡å‹é€‰æ‹©</label>
                    <div class="flex space-x-2">
                        <select id="ai-model" class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="">è¯·å…ˆé…ç½®APIå¯†é’¥</option>
                        </select>
                        <button id="refresh-models" class="px-4 py-3 bg-gray-200 hover:bg-gray-300 rounded-lg">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">æ¸©åº¦å€¼</label>
                    <input type="range" id="ai-temperature" min="0" max="2" step="0.1" value="0.7" 
                           class="w-full">
                    <div class="flex justify-between text-xs text-gray-500">
                        <span>ä¿å®ˆ (0)</span>
                        <span id="temperature-value" class="font-medium">0.7</span>
                        <span>åˆ›æ–° (2)</span>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">æœ€å¤§ä»¤ç‰Œæ•°</label>
                    <input type="number" id="ai-max-tokens" value="2000" min="100" max="100000" 
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        åˆ†ææç¤ºè¯æ¨¡æ¿
                        <span class="text-xs text-gray-500 ml-2">ä½¿ç”¨ {comments} ä½œä¸ºè¯„è®ºå†…å®¹å ä½ç¬¦</span>
                    </label>
                    <textarea id="ai-analysis-template" rows="8" 
                              class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm"
                              placeholder="è¯·åˆ†æä»¥ä¸‹ç¤¾äº¤åª’ä½“è¯„è®º..."></textarea>
                </div>
            </div>

            <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                <button id="test-ai-btn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                    <span class="test-text">æµ‹è¯•AIè¿æ¥</span>
                    <span class="test-loading hidden">
                        <svg class="inline w-4 h-4 loading mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        æµ‹è¯•ä¸­...
                    </span>
                </button>
                <span id="ai-test-result" class="ml-4 text-sm"></span>
            </div>
        </div>

        <!-- å¹³å°é…ç½® -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 flex items-center">
                <span class="bg-green-100 text-green-600 p-2 rounded-full mr-3">ğŸŒ</span>
                å¹³å°é…ç½®
            </h2>
            
            <div class="space-y-6">
                <!-- å…¬å…±é…ç½® -->
                <div class="border-l-4 border-purple-500 pl-4">
                    <h3 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">âš™ï¸</span> å…¬å…±é…ç½®
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">æœ€å¤§è¯„è®ºæ•°</label>
                            <input type="number" id="platform-max-comments" value="100" min="10" max="1000" 
                                   class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">å¯¼å‡ºå†…å®¹è®¾ç½®</label>
                            <div class="space-y-2">
                                <div class="flex items-center">
                                    <input type="checkbox" id="export-include-comments" class="mr-2">
                                    <span class="text-sm">åŒ…å«è¯„è®ºè¯¦æƒ…</span>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" id="export-include-thinking" class="mr-2">
                                    <span class="text-sm">åŒ…å«AIæ€è€ƒè¿‡ç¨‹</span>
                                </div>
                            </div>
                        </div>
                        <div id="export-comments-sort-container" class="hidden">
                            <label class="block text-sm font-medium text-gray-700 mb-1">è¯„è®ºæ’åºæ–¹å¼</label>
                            <select id="export-comments-sort" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                <option value="timestamp-desc">æ—¶é—´å€’åº</option>
                                <option value="timestamp-asc">æ—¶é—´æ­£åº</option>
                                <option value="likes-desc">ç‚¹èµæ•°é™åº</option>
                                <option value="likes-asc">ç‚¹èµæ•°å‡åº</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- YouTube -->
                <div class="border-l-4 border-red-500 pl-4">
                    <h3 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">ğŸ“º</span> YouTube
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">APIå¯†é’¥</label>
                            <input type="password" id="youtube-api-key" placeholder="YouTube Data API v3å¯†é’¥" 
                                   class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-red-500">
                        </div>
                    </div>
                </div>

                <!-- TikTok -->
                <div class="border-l-4 border-black pl-4">
                    <h3 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">ğŸµ</span> TikTok
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">æå–æ¨¡å¼</label>
                            <select id="tiktok-mode" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-black focus:border-black" disabled>
                                <option value="dom">DOM</option>
                            </select>
                            <p class="text-sm text-gray-500 mt-1">TikTokä»…æ”¯æŒDOMè§£ææ¨¡å¼</p>
                        </div>
                    </div>
                </div>

                <!-- Twitter/X -->
                <div class="border-l-4 border-blue-400 pl-4">
                    <h3 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">ğŸ¦</span> Twitter/X
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">æå–æ¨¡å¼</label>
                            <select id="twitter-mode" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-400 focus:border-blue-400">
                                <option value="dom">DOM</option>
                                <option value="api">API</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Bearer Token</label>
                            <input type="password" id="twitter-bearer-token" placeholder="Twitter API v2 Bearer Token" 
                                   class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-400 focus:border-blue-400">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">APIç‰ˆæœ¬</label>
                            <select id="twitter-api-version" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-400 focus:border-blue-400">
                                <option value="v2">v2 (æ¨è)</option>
                                <option value="v1.1">v1.1</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Bilibili -->
                <div class="border-l-4 border-pink-400 pl-4">
                    <h3 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">ğŸ“º</span> Bilibili
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">æå–æ¨¡å¼</label>
                            <select id="bilibili-mode" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-pink-400 focus:border-pink-400" disabled>
                                <option value="dom">DOM</option>
                            </select>
                            <p class="text-sm text-gray-500 mt-1">Bilibiliä»…æ”¯æŒDOMè§£ææ¨¡å¼</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- çŠ¶æ€æ  -->
        <div id="status-bar" class="fixed bottom-4 right-4 bg-white shadow-lg rounded-lg p-4 max-w-sm hidden">
            <div class="flex items-center space-x-2">
                <div id="status-icon" class="w-4 h-4 rounded-full"></div>
                <span id="status-text" class="text-sm"></span>
            </div>
        </div>
    </div>

    <!-- éšè—çš„æ–‡ä»¶è¾“å…¥ -->
    <input type="file" id="import-file" accept=".json" style="display: none;">

    <script src="src/utils/default-config.js"></script>
    <script src="options.js"></script>
</body>
</html>