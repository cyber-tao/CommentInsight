# 核心功能详解

<cite>
**本文档引用的文件**
- [background.js](file://background.js)
- [content.js](file://content.js)
- [popup.js](file://popup.js)
- [viewer.js](file://viewer.js)
</cite>

## 目录
1. [多平台评论提取机制](#多平台评论提取机制)
2. [AI分析模块实现原理](#ai分析模块实现原理)
3. [数据导出功能实现细节](#数据导出功能实现细节)
4. [后台服务消息处理流程](#后台服务消息处理流程)

## 多平台评论提取机制

CommentInsight通过两种不同的技术路径实现跨平台评论提取：对于YouTube采用官方API方式，而对于TikTok、Instagram、Facebook、Twitter和Bilibili则采用DOM注入解析方式。

### YouTube平台API数据获取

YouTube平台通过其官方v3 API进行数据获取。`extractYouTubeComments`方法首先从视频URL中提取视频ID，然后使用配置中的API密钥向`https://www.googleapis.com/youtube/v3/commentThreads`端点发起请求。该